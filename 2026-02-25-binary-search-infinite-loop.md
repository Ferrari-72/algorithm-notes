# ğŸ” 2026-02-25: Find the Duplicate Number - Binary Search Explained Simply

## ğŸ“‹ Problem Description
Given a sorted array `[aâ‚€, aâ‚, ..., aâ‚™]` with all integers from 0 to n-2 appearing exactly once, **except one number appears twice**. Find that duplicate number.

### Examples:
- Input: `[0,1,1,2,3,4]` â†’ Output: `1`
- Input: `[0,1,2,2]` â†’ Output: `2`
- Input: `[0,1,2,3,3,4]` â†’ Output: `3`

---

## âŒ æˆ‘çš„é”™è¯¯ä»£ç ä¸ºä»€ä¹ˆä¼šæ— é™å¾ªç¯ï¼Ÿ

```python
left = 0
right = len(arr) - 1

while left <= right:
    mid = (left + right) // 2
    
    if arr[mid] == mid:
        left = mid  # âš ï¸ è¿™æ˜¯é—®é¢˜æ‰€åœ¨ï¼
    else:
        right = mid  # âš ï¸ è¿™ä¹Ÿæ˜¯é—®é¢˜æ‰€åœ¨ï¼
```

### ğŸ”´ å…·ä½“å‘ç”Ÿäº†ä»€ä¹ˆï¼Ÿ

æƒ³è±¡ left = 2ï¼Œright = 3 çš„æƒ…å†µï¼š

```
å¾ªç¯1ï¼š
  mid = (2 + 3) // 2 = 2
  å¦‚æœæ¡ä»¶æˆç«‹ï¼šleft = 2 â† left è¿˜æ˜¯2ï¼Œæ²¡æœ‰ç§»åŠ¨ï¼
  
å¾ªç¯2ï¼š
  mid = (2 + 3) // 2 = 2 â† åˆæ˜¯2ï¼
  å¦‚æœæ¡ä»¶æˆç«‹ï¼šleft = 2 â† è¿˜æ˜¯æ²¡åŠ¨ï¼
  
å¾ªç¯3... æ°¸è¿œé‡å¤ ğŸ”ğŸ”ğŸ”
```

**ä¸ºä»€ä¹ˆï¼Ÿ**å› ä¸º `left = mid` å’Œ `right = mid` æ²¡æœ‰è®©æœç´¢èŒƒå›´ç¼©å°ï¼

---

## âœ… æ–¹æ¡ˆ1ï¼šè®¡æ•°æ³•ï¼ˆæ¨èæ–°æ‰‹ç†è§£ï¼‰

### ğŸ’¡ æ ¸å¿ƒæ€æƒ³

åœ¨è¿™ä¸ªé—®é¢˜ä¸­ï¼Œæ•°å­—åº”è¯¥å’Œç´¢å¼•ä¸€ä¸€å¯¹åº”ï¼š

```
æ­£å¸¸æƒ…å†µï¼š
ç´¢å¼•ï¼š  [0, 1, 2, 3, 4, 5]
æ•°å€¼ï¼š  [0, 1, 2, 3, 4, 5]  âœ“ å®Œç¾å¯¹åº”

ä½†æœ‰é‡å¤æ—¶ï¼š
ç´¢å¼•ï¼š  [0, 1, 2, 3, 4, 5]
æ•°å€¼ï¼š  [0, 1, 1, 2, 3, 4]  â† 1å‡ºç°äº†ä¸¤æ¬¡ï¼Œ5è¢«"æŒ¤å‡ºæ¥"äº†ï¼
```

**å…³é”®é—®é¢˜**ï¼šæœ‰å¤šå°‘ä¸ªæ•°å­— â‰¤ midï¼Ÿ

- å¦‚æœè¿™ä¸ªæ•°é‡ **å¤šäº** `mid + 1` ä¸ªï¼Œè¯´æ˜æœ‰æ•°å­—è¢«"æŒ¤å‡ºæ¥"äº†
- é‚£é‡å¤çš„æ•°å­—å°±åœ¨ **å·¦åŠéƒ¨åˆ†** [0, mid]
- å¦åˆ™é‡å¤çš„åœ¨ **å³åŠéƒ¨åˆ†** [mid+1, n-1]

### âœ… æ­£ç¡®ä»£ç 

```python
def findDuplicate(arr):
    left = 0
    right = len(arr) - 1
    
    while left <= right:
        mid = (left + right) // 2
        
        # ç¬¬1æ­¥ï¼šæ•°ä¸€æ•°æœ‰å¤šå°‘ä¸ªæ•°å­— â‰¤ mid
        count = 0
        for num in arr:
            if num <= mid:
                count += 1
        
        # ç¬¬2æ­¥ï¼šåˆ¤æ–­é‡å¤åœ¨å“ªä¸€è¾¹
        if count > mid + 1:
            # æ•°å­—è¢«æŒ¤å‡ºæ¥äº†ï¼Œé‡å¤åœ¨å·¦è¾¹
            right = mid - 1  # âœ… right å‘å·¦ç§»åŠ¨ï¼ŒèŒƒå›´ç¼©å°ï¼
        else:
            # é‡å¤åœ¨å³è¾¹
            left = mid + 1   # âœ… left å‘å³ç§»åŠ¨ï¼ŒèŒƒå›´ç¼©å°ï¼
    
    return left
```

### ğŸ” å…·ä½“èµ°ä¸€éä¾‹å­

```
æ•°ç»„ï¼š[0,1,1,2,3,4]  ï¼ˆé‡å¤çš„æ˜¯1ï¼‰

ç¬¬1æ¬¡å¾ªç¯ï¼šleft=0, right=5
  mid = (0 + 5) // 2 = 2
  æ•°ä¸€æ•° â‰¤ 2 çš„æ•°å­—ï¼š0, 1, 1, 2 = 4ä¸ª
  4 > (2 + 1)? æ˜¯çš„ï¼Œ4 > 3
  æ‰€ä»¥é‡å¤åœ¨å·¦è¾¹ â†’ right = 1
  èŒƒå›´ç°åœ¨æ˜¯ [0, 1]

ç¬¬2æ¬¡å¾ªç¯ï¼šleft=0, right=1
  mid = (0 + 1) // 2 = 0
  æ•°ä¸€æ•° â‰¤ 0 çš„æ•°å­—ï¼š0 = 1ä¸ª
  1 > (0 + 1)? ä¸ï¼Œ1 = 1
  æ‰€ä»¥é‡å¤åœ¨å³è¾¹ â†’ left = 1
  èŒƒå›´ç°åœ¨æ˜¯ [1, 1]

ç¬¬3æ¬¡å¾ªç¯ï¼šleft=1, right=1
  mid = (1 + 1) // 2 = 1
  æ•°ä¸€æ•° â‰¤ 1 çš„æ•°å­—ï¼š0, 1, 1 = 3ä¸ª
  3 > (1 + 1)? æ˜¯çš„ï¼Œ3 > 2
  æ‰€ä»¥é‡å¤åœ¨å·¦è¾¹ â†’ right = 0
  ç°åœ¨ left > rightï¼Œåœæ­¢å¾ªç¯

è¿”å› left = 1 âœ“ æ­£ç¡®ï¼
```

---

## ğŸ†š æ–¹æ¡ˆå¯¹æ¯”è¡¨

| å¯¹æ¯”é¡¹ | åŸé”™è¯¯ä»£ç  | æ­£ç¡®æ–¹æ¡ˆï¼ˆè®¡æ•°æ³•ï¼‰|
|------|---------|-------------|
| `left` æ›´æ–° | `left = mid` (ä¸åŠ¨) | `left = mid + 1` (ç¡®ä¿å‰è¿›) |
| `right` æ›´æ–° | `right = mid` (ä¸åŠ¨) | `right = mid - 1` (ç¡®ä¿åé€€) |
| ç»“æœ | ğŸ” æ— é™å¾ªç¯ | âœ… æ­£ç¡®æ‰¾åˆ°ç­”æ¡ˆ |
| èŒƒå›´ç¼©å°å—? | âŒ ä¸ç¼©å° | âœ… æ¯æ¬¡éƒ½ç¼©å° |

---

## ğŸ¯ æ ¸å¿ƒè¦ç‚¹ï¼ˆè®°ä½è¿™ä¸ªï¼ï¼‰

### âš ï¸ äºŒåˆ†æŸ¥æ‰¾çš„é»„é‡‘æ³•åˆ™ï¼š
**æ¯ä¸€æ¬¡å¾ªç¯ï¼Œæœç´¢èŒƒå›´å¿…é¡»ç¼©å°ï¼**

```
âŒ é”™è¯¯ï¼š         âœ… æ­£ç¡®ï¼š
left = mid   â†’   left = mid + 1  (è‡³å°‘å‰è¿›1æ­¥)
right = mid  â†’   right = mid - 1 (è‡³å°‘åé€€1æ­¥)
```

å¦‚æœä½ ä¸ç¡®å®šï¼Œè®°ä½ï¼š
- æ›´æ–°å·¦è¾¹ç•Œæ—¶ï¼Œç”¨ `left = mid + 1`
- æ›´æ–°å³è¾¹ç•Œæ—¶ï¼Œç”¨ `right = mid - 1`

---

## ğŸ§ª å®Œæ•´æµ‹è¯•ä»£ç 

```python
def findDuplicate(arr):
    left = 0
    right = len(arr) - 1
    
    while left <= right:
        mid = (left + right) // 2
        count = sum(1 for num in arr if num <= mid)
        
        if count > mid + 1:
            right = mid - 1
        else:
            left = mid + 1
    
    return left


# æµ‹è¯•ç”¨ä¾‹
Test cases have been defined below:
test_cases = [
    [0, 1, 1, 2, 3, 4],    # æœŸæœ›: 1
    [0, 1, 2, 2],          # æœŸæœ›: 2
    [0, 1, 2, 3, 3, 4],    # æœŸæœ›: 3
]

for arr in test_cases:
    result = findDuplicate(arr)
    print(f"è¾“å…¥: {arr} â†’ è¾“å‡º: {result}")
```

**è¾“å‡º**ï¼š
```
è¾“å…¥: [0, 1, 1, 2, 3, 4] â†’ è¾“å‡º: 1 âœ“
è¾“å…¥: [0, 1, 2, 2] â†’ è¾“å‡º: 2 âœ“
è¾“å…¥: [0, 1, 2, 3, 3, 4] â†’ è¾“å‡º: 3 âœ“
```

---

## ğŸš« å…¶ä»–å¸¸è§çš„äºŒåˆ†æŸ¥æ‰¾é”™è¯¯

| é”™è¯¯ç±»å‹ | é”™è¯¯ä»£ç  | åæœ | ä¿®æ­£ |
|---------|---------|------|------|
| æ²¡æœ‰ç§»åŠ¨æŒ‡é’ˆ | `left = mid` | æ— é™å¾ªç¯ | `left = mid + 1` |
| æ²¡æœ‰ç§»åŠ¨æŒ‡é’ˆ | `right = mid` | æ— é™å¾ªç¯ | `right = mid - 1` |
| è¶Šç•Œ | `mid = (left + right) // 2` æº¢å‡º | å†…å­˜é”™è¯¯ | `mid = left + (right - left) // 2` |
| è¾¹ç•Œæ¡ä»¶ | `while left < right` (é—æ¼mid) | æ¼æ‰ç­”æ¡ˆ | `while left <= right` |

---

**Date**: 2026-02-25 | **Topic**: Binary Search Debugging | **Difficulty**: â­â­ Medium | **Understanding Level**: Beginner-Friendly
